<!DOCTYPE html>

<html>
<head>
  <title>ann.coffee</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="ann-coffee">ann.coffee</h1>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Artificial Neural Network library written in JavaScript and 
CoffeeScript, implementing several neural network architectures, such 
as multi-layer perceptrons, boltzmann machines, and deep learning
networks.</p>

            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Require underscore.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>_ = <span class="hljs-built_in">require</span>(<span class="hljs-string">"underscore"</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h1 id="array-prototype-extensions">Array.prototype Extensions</h1>

            </div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Some small changes to the array prototype have been made in order to
facilitate some mathematic functions.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>Object.defineProperties Array.prototype,</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <h2 id="transpose">Transpose</h2>

            </div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p><code>T</code> is a new property implemented in the Array object which will 
return the transposed array.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-attribute">T</span>: 
		<span class="hljs-attribute">get</span>:<span class="hljs-function"> -&gt;</span>
			t = Object(<span class="hljs-keyword">this</span>)
			len = t.length &gt;&gt;&gt; <span class="hljs-number">0</span>
			<span class="hljs-keyword">return</span> _.zip.apply(_, (t[i] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..len]))</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h2 id="is2d">is2D</h2>

            </div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p><code>is2D</code> is a property which returns <strong>true</strong> or <strong>false</strong> if any of the
elements in an array is an array.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-attribute">is2D</span>: 
		<span class="hljs-attribute">get</span>:<span class="hljs-function"> -&gt;</span>
			t = Object(<span class="hljs-keyword">this</span>)
			len = t.length &gt;&gt;&gt; <span class="hljs-number">0</span>
			<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..len]
				<span class="hljs-keyword">if</span> t[i] <span class="hljs-keyword">instanceof</span> Array
					<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span></pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <h2 id="mult">mult</h2>

            </div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p><code>mult</code> multiplies two arrays together. </p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-attribute">Array</span>::<span class="hljs-function"><span class="hljs-title">mult</span> = <span class="hljs-params">(arr)</span> -&gt;</span>
	t = Object(<span class="hljs-keyword">this</span>)
	len = t.length &gt;&gt;&gt; <span class="hljs-number">0</span>
	result = []
	<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..len]
		<span class="hljs-keyword">if</span> t[i] <span class="hljs-keyword">instanceof</span> Array
			result[i] = t[i].mult(arr[i])
		<span class="hljs-keyword">else</span>
			result[i] ?= t[i] * arr[i]
	<span class="hljs-keyword">return</span> result</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <h2 id="sum">sum</h2>

            </div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p><code>sum</code> returns the sum of a 1-dimensional array.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-attribute">Array</span>::<span class="hljs-function"><span class="hljs-title">sum</span> = -&gt;</span>
	t = Object(<span class="hljs-keyword">this</span>)
	len = t.length &gt;&gt;&gt; <span class="hljs-number">0</span>
	<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..len]
		sum += t[i]
	<span class="hljs-keyword">return</span> sum</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <h2 id="map">map</h2>

            </div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p><code>map</code> is an implementation of the EMCA polyfill for <code>map</code> with one 
exceptionâ€”-it iterates over 2d-arrays.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-attribute">Array</span>::<span class="hljs-function"><span class="hljs-title">map</span> = <span class="hljs-params">(f, args...)</span> -&gt;</span>
	t = Object(<span class="hljs-keyword">this</span>)
	len = t.length &gt;&gt;&gt; <span class="hljs-number">0</span>

	<span class="hljs-keyword">if</span> <span class="hljs-keyword">typeof</span> f <span class="hljs-keyword">isnt</span> <span class="hljs-string">"function"</span>
		<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> TypeError()

	result = []
	thisArg = <span class="hljs-keyword">if</span> arguments.length &gt;= <span class="hljs-number">2</span> <span class="hljs-keyword">then</span> arguments[<span class="hljs-number">1</span>] <span class="hljs-keyword">else</span> <span class="hljs-literal">undefined</span>
	<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..len]
		<span class="hljs-keyword">if</span> t[i] <span class="hljs-keyword">instanceof</span> Array
			result[i] = t[i].map f, args...
		<span class="hljs-keyword">else</span>
			result[i] ?= f.call thisArg, t[i], i, t</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <h1 id="network-class">Network Class</h1>

            </div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>The meat and potatoes of the ann.js library. This is the base class 
for many of the implementations and architectures seen in this 
library.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">network</span></span>

	<span class="hljs-attribute">constructor</span>: <span class="hljs-function"><span class="hljs-params">(<span class="hljs-property">@config</span> = [<span class="hljs-number">2</span>,<span class="hljs-number">2</span>], options = {})</span> -&gt;</span>
		<span class="hljs-property">@weights</span> = []</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Set options defaults.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-property">@options</span> = _.defaults(options, {</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Sigmoid activation &amp; derivative function.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>			<span class="hljs-attribute">activation</span>: <span class="hljs-function"><span class="hljs-params">(x)</span> -&gt;</span> ( <span class="hljs-number">1</span> / (<span class="hljs-number">1</span> + Math.exp(-x)) )
			<span class="hljs-attribute">derivative</span>: <span class="hljs-function"><span class="hljs-params">()</span> -&gt;</span> (<span class="hljs-keyword">this</span>.output * (<span class="hljs-number">1</span> - <span class="hljs-keyword">this</span>.output))
			<span class="hljs-attribute">hasBias</span>: <span class="hljs-literal">true</span>
		})

		<span class="hljs-property">@activation</span> ?= options.activation
		<span class="hljs-property">@derivative</span> ?= options.derivative</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Populate weights array with random values.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..<span class="hljs-property">@config</span>.length-<span class="hljs-number">1</span>]

			<span class="hljs-property">@weights</span>[i] = []

			<span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..<span class="hljs-property">@config</span>[i+<span class="hljs-number">1</span>]]

				<span class="hljs-property">@weights</span>[i][j] = []

				<span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..<span class="hljs-property">@config</span>[i]]
					<span class="hljs-property">@weights</span>[i][j][k] = Math.random()</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Account for bias if <code>hasBias</code> options is <strong>true</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				<span class="hljs-keyword">if</span> <span class="hljs-property">@options</span>?.hasBias
					<span class="hljs-property">@weights</span>[i][j].push <span class="hljs-number">1</span>

		<span class="hljs-keyword">this</span>.initialize(config, options)</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <h2 id="initialize">initialize</h2>

            </div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Overridable initialize function.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-attribute">initialize</span>: <span class="hljs-function"><span class="hljs-params">(config, options)</span> -&gt;</span></pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <h2 id="run">run</h2>

            </div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Overridable function specified in each particular architecture.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-attribute">run</span>: <span class="hljs-function"><span class="hljs-params">(input)</span> -&gt;</span></pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <h2 id="foreach">forEach</h2>

            </div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Made to be similar to the implementation of <code>_.each</code> in
<a href="http://www.underscorejs.org">underscore.js</a></p>

            </div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Passes the weights associated with each neuron and the row and 
column indices.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-attribute">forEach</span>: <span class="hljs-function"><span class="hljs-params">(cb, handler)</span> -&gt;</span>
		<span class="hljs-keyword">if</span> cb? <span class="hljs-keyword">is</span> <span class="hljs-literal">false</span> <span class="hljs-keyword">then</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
		handler ?= <span class="hljs-keyword">this</span>

		<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..<span class="hljs-property">@config</span>.length-<span class="hljs-number">1</span>]

			<span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..<span class="hljs-property">@weights</span>[i].length]
				cb.call(handler, <span class="hljs-property">@weights</span>[i][j], i, j)</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <h2 id="clone">clone</h2>

            </div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Clones the current network and copies the weights values from the 
current network to the cloned network.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-attribute">clone</span>:<span class="hljs-function"> -&gt;</span>
		clone = <span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>.constructor(<span class="hljs-keyword">this</span>.config, <span class="hljs-keyword">this</span>.options)
		clone.copy <span class="hljs-keyword">this</span>

		<span class="hljs-keyword">return</span> clone</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <h2 id="copy">copy</h2>

            </div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Copies the weights values from <code>network</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-attribute">copy</span>: <span class="hljs-function"><span class="hljs-params">(network)</span> -&gt;</span>
		<span class="hljs-property">@weights</span> = []
		<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..network.weights.length]
			<span class="hljs-property">@weights</span>[i] = []
			<span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..network.weights[i].length]
				<span class="hljs-property">@weights</span>[i][j] = network.weights[i][j][..]</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <h2 id="train">train</h2>

            </div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>If a <code>trainingSystem</code> is specified during instantiation, the train
function can be used as a wrapper function for the 
trainingSystemâ€™s train function.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>	<span class="hljs-attribute">train</span>: <span class="hljs-function"><span class="hljs-params">(inputs, ideals)</span> -&gt;</span>
		<span class="hljs-keyword">this</span>.options?.trainingSystem.train <span class="hljs-keyword">this</span></pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Export the <code>network</code> class.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">module</span>.<span class="hljs-built_in">exports</span> = network</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
